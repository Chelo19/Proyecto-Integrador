<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../css/login.css">
    <link rel="stylesheet" href="../css/output.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
</head>
<body class="login-bg">
    <div class="login-component">
        <div class="login-container">
            <div class="text-green-700 login-container-title">
                Inicio de sesión
            </div>
            <div class="login-container-input-box">
                <div class="login-container-input-div">
                    <span>Usuario</span>
                    <input class="login-container-input" placeholder="Usuario" id="usuario"/>
                </div>
                <div class="login-container-input-div">
                    <span>Contraseña</span>
                    <input class="login-container-input" placeholder="Contraseña" type="password" id="contraseña"/>
                </div>
                <button class="login-container-send" onclick="signIn()">Enviar</button>
            </div>
        </div>
    </div>
    <div class="login-component">
        <span class="text-green-700 login-title">Inicia sesión para comenzar a usar el sistema</span>
    </div>

    <!-- scripts de Firebase -->
    <script type="module" src="https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.1.0/firebase-auth.js"></script>

    <script>
        
    const firebaseConfig = {
              apiKey: "AIzaSyDp8ymMZ-6VT7JezIrVVmlIITwnPdZwZxM",
              authDomain: "proyecto-integrador-a0f98.firebaseapp.com",
              databaseURL: "https://proyecto-integrador-a0f98-default-rtdb.firebaseio.com",
              projectId: "proyecto-integrador-a0f98",
              storageBucket: "proyecto-integrador-a0f98.appspot.com",
              messagingSenderId: "605088859522",
              appId: "1:605088859522:web:382024b0d42ac40a937b9b",
              measurementId: "G-WQLWS32D3N"
            };

        // Inicializa Firebase solo si la configuración está presente
        if (firebaseConfig.apiKey && firebaseConfig.authDomain && firebaseConfig.projectId) {
            firebase.initializeApp(firebaseConfig);

            // Función para autenticar al usuario
            function signIn() {
                var email = document.getElementById("usuario").value;
                var password = document.getElementById("contraseña").value;

                firebase.auth().signInWithEmailAndPassword(email, password)
                    .then(function(userCredential) {
                        // Autenticación exitosa, redirecciona al usuario a la página "home.html"
                        window.location.href = "home.html";
                    })
                    .catch(function(error) {
                        // Error en caso de autenticación fallida
                        var errorCode = error.code;
                        var errorMessage = error.message;
                        var errorDiv = document.getElementById("error-message");
                        errorDiv.innerText = "Error: " + errorMessage;
                    });
            }
        } else {
            console.error("Error: No se ha proporcionado la configuración de Firebase.");
        }
    </script>
</body>
</html>
